# Render Blueprint for PMWiki Backend
# This is an optional Infrastructure-as-Code file
# You can use this for automated deployments or deploy manually via Render Dashboard

services:
  - type: web
    name: pmwiki-backend
    runtime: python
    plan: free  # Change to 'starter' for $7/month or 'standard' for always-on $25/month
    region: oregon  # Choose: oregon, frankfurt, singapore, ohio, virginia
    buildCommand: pip install -r requirements.txt
    startCommand: uvicorn app.main:app --host 0.0.0.0 --port $PORT
    healthCheckPath: /api/v1/health
    envVars:
      - key: DATABASE_URL
        sync: false  # Set manually in Render dashboard
      - key: QDRANT_HOST
        sync: false
      - key: QDRANT_API_KEY
        sync: false
      - key: QDRANT_COLLECTION_NAME
        value: pmwiki_sections
      - key: GROQ_API_KEY
        sync: false
      - key: VOYAGE_API_KEY
        sync: false
      - key: PMBOK_IMAGE_BASE_URL
        sync: false
      - key: ALLOWED_HOSTS
        value: '["https://your-vercel-url.vercel.app","http://localhost:5173"]'
